\chapter{Descripción del sistema}

\bigskip
En este capítulo se describe la fase de análisis del proyecto. Algunos requisitos o partes del capítulo fueron modificados o corregidos durante el trabajo. A continuación se muestran los definitivos.

\bigskip
\section{Análisis inicial}

Este proyecto fue propuesto desde un principio por {\tutor}, ya que en su ámbito de investigación requiere algoritmos evolutivos con muchos requerimientos de cómputo, por lo que al  pararelizarlos se logran unos resultados más rápidos, y al estar disponible en un servicio web no es necesario un dispositivo específico.

Después de la propuesta del trabajo, y antes del desarrollo del mismo se hicieron diversas reuniones para establecer sus bases y alcance. 

Para desarrollarlo se separó el trabajo en un \textit{módulo} con las funcionalidades del algoritmo genético, y otro con el servicio web que pudiese aprovechar dichas funcionalidades.

En la selección de tecnologías a usar se optó por la arquitectura de cómputo CUDA, ya que es actualmente la más potente, como se ve en el capítulo anterior, y se dispone de una tarjeta gráfica NVIDIA de gran potencia.

En la parte del servicio web se optó por el framework python Django, ya que se estudió con profundidad a lo largo del curso y es en la actualidad es la mejor opción para realizar un servicio web.

Dichas tecnologías son actuales, con una gran comunidad detrás, de manera que están en continuo desarrollo y mejora, además de estar bien asentadas, dando robustez al trabajo.


\newpage
\section{Objetivos}

Este trabajo tiene como principal objetivo el desarrollo de unas clases que lancen algoritmos genéticos de forma paralela, y puedan ser usados por un servicio web.

Los principales objetivos, de manera reducida, que se quieren alcanzar con este trabajo son:


\begin{itemize}
	\item  \textbf{OBJ. 1} Gestión del servicio web
	\begin{itemize}
		\item \textbf{OBJ. 1.1} Ejecución de algoritmo genético.	
		\item \textbf{OBJ. 1.2} Consulta de la solución.
		\item \textbf{OBJ. 1.3} Contacto con el administrador o personal de contacto.
	\end{itemize}
		
	\item  \textbf{OBJ. 2} Gestión del algoritmo genético
	\begin{itemize}
		\item \textbf{OBJ. 2.1} Entrada de parámetros.
		\item \textbf{OBJ. 2.2} Ejecución del algoritmo genético.
		\item \textbf{OBJ. 2.3} Generar salida en formato JSON.
	\end{itemize}
	
\end{itemize}


	 

\newpage
\section{Especificación de requisitos}

\subsection{Requisitos funcionales}

\bigskip
En esta sección del capítulo se definirán las características de alto nivel (requisitos funcionales) del sistema que son necesarios para las necesidades del usuario.

\bigskip

\begin{itemize}
	\item  \textbf{RF. 1 Gestión del servicio web}
	\begin{itemize}
		\item \textbf{RF. 1.1} Ejecución de algoritmo genético.
		\begin{itemize}
			\item \textbf{RF. 1.1.1} Entrada de parámetros .
			\item \textbf{RF. 1.1.2} Petición al servidor.
		\end{itemize}
		
		\item \textbf{RF. 1.2} Consulta de la solución.
		\item \textbf{RF. 1.3} Contacto con el administrador o personal de contacto.
	\end{itemize}
	
	\item  \textbf{RF. 2 Gestión del algoritmo genético}
	\begin{itemize}
		\item \textbf{RF. 2.1} Entrada de parámetros.
		\item \textbf{RF. 2.2} Ejecución del algoritmo.
		\begin{itemize}
			\item \textbf{RF. 2.2.1} Generación de poblaciones.
			\item \textbf{RF. 2.2.2} Evaluación de cada individuo.
			\begin{itemize}
				\item \textbf{RF. 2.2.2.1} Evaluación mediante la función Ackley.
				\item \textbf{RF. 2.2.2.2} Evaluación mediante la función Rastrigin.
			\end{itemize}
			\item \textbf{RF. 2.2.3} Selección de individuos para el cruce.
			\item \textbf{RF. 2.2.4} Cruce de individuos.
			\item \textbf{RF. 2.2.5} Mutación del individuo.
			\item \textbf{RF. 2.2.6} Reemplazo del individuo.
		\end{itemize}
		\item \textbf{RF. 2.3} Generar salida en formato JSON.
	\end{itemize}
	
\end{itemize}



\bigskip
\subsection{Requisitos no funcionales}

\bigskip
En esta sección se establecen los requisitos no funcionales.

\bigskip
\textbf{Rendimiento}\\

\textbf{RNF 1}: Será implementado con tecnologías que optimicen el rendimiento y la eficacia, tanto en el servicio web como en el algoritmo genético.\\

\textbf{Disponibilidad}\\

\textbf{RNF 2}: Se intentará que el servicio esté disponible las 24 horas del día, con una estructura segura y preparada ante los fallos.\\


\textbf{Accesibilidad}\\

\textbf{RNF 3}: Se logrará una gran accesibilidad al tratarse de un servicio web.\\


\textbf{Usabilidad}\\

\textbf{RNF 4}: La interfaz, con el orden y disposición de los elementos será lo más usable posible.\\

\textbf{Interfaz}\\

\textbf{RNF 5}: La interfaz será sencilla e intuitiva.\\

\textbf{RNF 6}: Se adaptará a cualquier tamaño de pantalla, tendrá un diseño adaptativo.\\


\textbf{Estabilidad}\\

\textbf{RNF 7}: Se buscará la mayor estabilidad en el sistema, usando tecnologías robustas y estables.\\


\textbf{Mantenimiento}\\

\textbf{RNF 8}: Se ha desarrollado de manera ordenada y documentando todos las partes, para que el mantenimiento pueda ser realizado por el mismo desarrollador o por terceros de manera sencilla.\\


\textbf{Soporte}\\

\textbf{RNF 9}: Se le facilitará al usuario contacto con alguien responsable del sistema, para que en caso de necesitar soporto le sea fácil y rápido.\\


\bigskip
\subsection{Requisitos de información}

\bigskip
En esta sección se establecen los requisitos de información, que estarán fuertemente relacionados a los requisitos funcionales, ya que será la información mínima para llevarlos a cabo.

\begin{itemize}
	\item  \textbf{RI. 1 Gestión del servicio web}
	\begin{itemize}
		\item \textbf{RI. 1.1} Ejecución de algoritmo genético.
		\begin{itemize}
			\item Tamaño de la población
			\item Número de cromosomas
			\item Valor mínimo
			\item Valor máximo
			\item Probabilidad de cruce
			\item Probabilidad de mutación
			\item Número de generaciones
			\item Parámetros para la función Ackley
				\begin{itemize}
					\item Valor A
					\item Valor B
					\item Valor C 		
				\end{itemize}			
			\item Parámetros para la función Rastrigin
			\begin{itemize}
				\item Valor A
			\end{itemize}
		\end{itemize}
	\end{itemize}
		
	\item \textbf{RI. 1.2} Consulta de la solución.
	\begin{itemize}
		\item Hora de consulta
		\item Rendimiento
		\item Tiempo de cómputo
		\item Tamaño del cómputo
		\item Hebras usadas
		\item Datos de entrada (RI 1.1)
		\item Información del dispositivo que ha realizado el algoritmo
		\item Mejores variables obtenidas
		\item Mejor fitness
	\end{itemize}


	\item  \textbf{RI. 2 Gestión del algoritmo genético}
	\begin{itemize}
		\item \textbf{RI. 2.1} Entrada de parámetros.
		\begin{itemize}
			\item Dispositivo a usar
			\item Función de optimización a usar
			\item Tamaño de la población
			\item Número de cromosomas
			\item Valor mínimo
			\item Valor máximo
			\item Probabilidad de cruce
			\item Probabilidad de mutación
			\item Número de generaciones
			\item Parámetros para la función Ackley
				\begin{itemize}
					\item Valor A
					\item Valor B
					\item Valor C
				\end{itemize}
				
			\item RI 2.1.2 Parámetros para la función Rastrigin
				\begin{itemize}
					\item Valor A
				\end{itemize}
			\end{itemize}
		\end{itemize}

		\item \textbf{RI. 2.2} Generar salida en formato JSON.
		\begin{itemize}
			\item Rendimiento
			\item Tiempo de cómputo
			\item Tamaño del cómputo
			\item Hebras usadas
			\item Datos de entrada (RI 2.1)
			\item Información del dispositivo que ha realizado el algoritmo
			\item Mejores variables obtenidas
			\item Mejor fitness
		\end{itemize}
	
\end{itemize}


\bigskip
\subsection{Restricciones}

\bigskip
Las restricciones del sistema serán las siguientes:

\bigskip
\textbf{RSTR 1 Gestión del servicio web (Ejecución del algoritmo genético):}

\begin{itemize}
	\item RSTR 1.1: El tamaño de la población será menor de 10.000.
	\item RSTR 1.2: Habrá un máximo de 1.000 cromosomas (1.000 variables).
	\item RSTR 1.3: El valor máximo tendrá que ser más grande el el valor mínimo.
	\item RSTR 1.4: La probabilidad de cruce tendrá que ser entre 0 y 1.
	\item RSTR 1.5: La probabilidad de mutación tendrá que ser entre 0 y 1.
\end{itemize}


\bigskip
\textbf{RSTR 2 Gestión del algoritmo genético (Entrada de parámetros):}

\begin{itemize}
	\item RSTR 2.1: Para escoger la función con la que optimizar introducimos 0 o 1.
	\item RSTR 2.2: El tamaño de la población será menor de 10.000.
	\item RSTR 2.3: Habrá un máximo de 1.000 cromosomas (1000 variables).
	\item RSTR 2.4: El valor máximo tendrá que ser más grande el valor mínimo.
	\item RSTR 2.5: La probabilidad de cruce tendrá que ser entre 0 y 1.
	\item RSTR 2.6: La probabilidad de mutación tendrá que ser entre 0 y 1.
\end{itemize}


\newpage
\section{Modelo funcional}


\bigskip
\subsection{Resumen de actores}

\begin{itemize}
	\item \textbf{Usuario}
	
	Descripción: Representa al usuario que quiere hacer uso del sistema.\\
	
	Tipo: Primario\\
	
	Responsabilidad: Completar el formulario con los datos que requiera el algoritmo genético.
	
	\item \textbf{Administrador del sistema}
	
	Descripción: Representa a la persona encargada de mantener, actualizar y gestionar el sistema.\\
	
	Tipo: Secundario\\
	
	Responsabilidad: Realizar todas las actividades de gestión y actualización del sistema.
	
	\item \textbf{Servidor}
	
	Descripción: Representa al servidor, que realizará peticiones al sistema para ofrecérselas al Usuario.\\
	
	Tipo: Primario\\
	
	Responsabilidad: Ofrecer el servicio web al usuario y gestionar sus peticiones de cómputo.
	
\end{itemize}




\bigskip
\subsection{Identificación de los casos de uso}
\bigskip

Los distintos casos de uso serán:
\begin{itemize}
	\item Para la gestión del servicio web:
	\begin{itemize}

		\item \textbf{CU 1} Entrada de parámetros .
		\item \textbf{CU 2} Petición al servidor.	
		\item \textbf{CU 3} Consulta de la solución.
		\item \textbf{CU 4} Contacto con el administrador o personal de contacto.
	\end{itemize}
	
	\item Para la gestión del algoritmo genético:
	\begin{itemize}
		\item \textbf{CU 5} Entrada de parámetros.
		\item \textbf{CU 6} Generación de poblaciones.
		\item \textbf{CU 7} Evaluación mediante la función Ackley.
		\item \textbf{CU 8} Evaluación mediante la función Rastrigin.
		\item \textbf{CU 9} Selección de individuos para el cruce.
		\item \textbf{CU 10} Cruce de individuos.
		\item \textbf{CU 11} Mutación del individuo.
		\item \textbf{CU 12} Reemplazo del individuo.
		\item \textbf{CU 13} Generar salida en formato JSON.
	\end{itemize}
	
\end{itemize}



\bigskip
\subsection{Descripción de los casos de uso}
\bigskip


\begin{itemize}
	
	\item \textbf{CU 1} Entrada de parámetros.
	\begin{itemize}
		\item \textbf{Actores:} Usuario.
		\item \textbf{Tipo:} Primario, esencial.
		\item \textbf{Dependencias:}
		\item \textbf{Precondición:}
		\item \textbf{Postcondición:} El sistema hace una petición al servidor con los parámetros introducidos.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Especificar los parámetros del algoritmo genético.
		\item \textbf{Resumen:} El usuario introduce los parámetros (distintos a los declarados por defecto) que quiere para ejecutar el algoritmo genético. 
	\end{itemize}
	
	\item \textbf{CU Petición al servidor} .
	\begin{itemize}
		\item \textbf{Actores:} Usuario.
		\item \textbf{Tipo:} Primario, esencial.
		\item \textbf{Dependencias:} CU 1.
		\item \textbf{Precondición:} Los parámetros introducidos deben ser correctos.
		\item \textbf{Postcondición:} Se mandará una petición de cómputo al sistema que devolverá a la web.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Confirmar la petición al servidor.
		\item \textbf{Resumen:} El usuario realiza la petición de ejecución del algoritmo genético que busca.
	\end{itemize}

	\item \textbf{CU 3} Consulta de la solución.
	\begin{itemize}
		\item \textbf{Actores:} Usuario.
		\item \textbf{Tipo:} Primario, esencial.
		\item \textbf{Dependencias:} CU 2.
		\item \textbf{Precondición:} El usuario ha hecho la petición al servidor y este haber acabado.
		\item \textbf{Postcondición:} Resultados visibles al usuario
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Permitir ver al usuario los resultados generados por el sistema.
		\item \textbf{Resumen:} Una vez que se resuelve el algoritmo genético, el servidor devuelve la solución, maquetada para facilitar su consulta al usuario.
	\end{itemize}

	\item \textbf{CU 4} Contacto con el administrador o personal de contacto.
	\begin{itemize}
		\item \textbf{Actores:} Usuario.
		\item \textbf{Tipo:} Opcional.
		\item \textbf{Dependencias:} 
		\item \textbf{Precondición:}
		\item \textbf{Postcondición:} El usuario podrá comunicarse con alguien encargado del sistema.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Poder notificar dudas o sugerencias del sistema.
		\item \textbf{Resumen:} El usuario podrá mandar un correo o ponerse en contacto con alguien responsable del sistema al usuario, pudiendo notificar así fallos o sugerencias sobre el sistema.
	\end{itemize}	

\bigskip

	\item \textbf{CU 5} Entrada de parámetros.
	\begin{itemize}
		\item \textbf{Actores:} Servidor.
		\item \textbf{Tipo:} Primario, esencial.
		\item \textbf{Dependencias:} CU 1 y CU 2.
		\item \textbf{Precondición:} 
		\item \textbf{Postcondición:} Lanzar el algoritmo genético con los parámetros introducidos.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Especificar los parámetros para lanzar el algoritmo genético.
		\item \textbf{Resumen:} Tras leer los parámetros que especifica el usuario (o usar los declarados por defecto) se lanzará el algoritmo genético con ellos.
	\end{itemize}	

	\item \textbf{CU 6} Generación de poblaciones .
	\begin{itemize}
		\item \textbf{Actores:} Servidor.
		\item \textbf{Tipo:} Primario, esencial.
		\item \textbf{Dependencias:} 
		\item \textbf{Precondición:}
		\item \textbf{Postcondición:} Se tendrán una serie de poblaciones inicializadas.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Generar una serie de poblaciones para el algoritmo genético.
		\item \textbf{Resumen:} Se generan una serie de poblaciones con los valores inicializadas para usar por el algoritmo genético.
	\end{itemize}	

	\item \textbf{CU 7} Evaluación mediante la función Ackley.
	\begin{itemize}
		\item \textbf{Actores:} Servidor.
		\item \textbf{Tipo:} Opcional.
		\item \textbf{Dependencias:} CU 5 y CU 6.
		\item \textbf{Precondición:} Tener una serie de individuos en distintas poblaciones para ser evaluados.
		\item \textbf{Postcondición:} Cada individuo tendrá su \textit{fitness} o \textit{capacidad}.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Obtener un \textit{fitness} de los individuos.
		\item \textbf{Resumen:} A cada individuo se le evaluará mediante la función Ackley, obteniendo un \textit{fitness} para ser usado en una posterior selección.
	\end{itemize}	

	\item \textbf{CU 8} Evaluación mediante la función Rastrigin.
	\begin{itemize}
		\item \textbf{Actores:} Servidor.
		\item \textbf{Tipo:} Opcional.
		\item \textbf{Dependencias:} CU 5 y CU 6.
		\item \textbf{Precondición:} Tener una serie de individuos en distintas poblaciones para ser evaluados.
		\item \textbf{Postcondición:} Cada individuo tendrá su \textit{fitness} o \textit{capacidad}.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Obtener un \textit{fitness} de los individuos.
		\item \textbf{Resumen:} A cada individuo se le evaluará mediante la función Rastrigin, obteniendo un \textit{fitness} para ser usado en una posterior selección.
	\end{itemize}	

	\item \textbf{CU 9} Selección de individuos para el cruce.
	\begin{itemize}
		\item \textbf{Actores:} Servidor.
		\item \textbf{Tipo:} Primario, esencial.
		\item \textbf{Dependencias:} CU 5, CU 7 y CU 8.
		\item \textbf{Precondición:} Los individuos tendrá sus respectivos \textit{fitness}.
		\item \textbf{Postcondición:} Se seleccionaran los individuos que se considere mejor.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Seleccionar individuos para su posterior cruce.
		\item \textbf{Resumen:} 
	\end{itemize}	

	\item \textbf{CU 10 Cruce de individuos} .
	\begin{itemize}
		\item \textbf{Actores:} Servidor.
		\item \textbf{Tipo:} Primario, esencial.
		\item \textbf{Dependencias:} CU 5 y CU 9.
		\item \textbf{Precondición:} Tener individuos seleccionados para su cruce.
		\item \textbf{Postcondición:} Nuevos individuos resultado del cruce de los seleccionados.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Lograr nuevos individuos mejores.
		\item \textbf{Resumen:} Tras seleccionar los mejores individuos se cruzan para obtener una posible mejora.
	\end{itemize}	

	\item \textbf{CU 11} Mutación del individuo.
	\begin{itemize}
		\item \textbf{Actores:} Servidor.
		\item \textbf{Tipo:} Primario, esencial.
		\item \textbf{Referencias:} CU 5 y CU 10.
		\item \textbf{Precondición:}
		\item \textbf{Postcondición:} Se modifica parte de un individuo.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Modificar al azar parte del cromosoma de los individuos.
		\item \textbf{Resumen:} Se modifica al azar parte de los individuos (su cromosoma), permitiendo alcanzar zonas del espacio de búsqueda que no estaban cubiertas por los individuos de la población actual.
	\end{itemize}	

	\item \textbf{CU 12} Reemplazo del individuo.
	\begin{itemize}
		\item \textbf{Actores:} Servidor.
		\item \textbf{Tipo:} Primario, esencial.
		\item \textbf{Referencias:} CU 5 y CU 11.
		\item \textbf{Precondición:}
		\item \textbf{Postcondición:} Se logra un mejor individuo.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Actualizar a un mejor individuo.
		\item \textbf{Resumen:} -una vez realizadas las anteriores funciones genéticas, se seleccionan los mejores individuos para conformar la población de la generación siguiente.
	\end{itemize}	

	\item \textbf{CU 13} Generar salida en formato JSON.
	\begin{itemize}
		\item \textbf{Actores:} Servidor.
		\item \textbf{Tipo:} Primario, esencial.
		\item \textbf{Referencias:} 
		\item \textbf{Precondición:} Realizar el algoritmo genético.
		\item \textbf{Postcondición:} Se tendrá en formato JSON la salida del algoritmo genético ejecutado.
		\item\textbf{ Autor:} {\autor}.
		\item \textbf{Versión:} 1.0.
		\item \textbf{Propósito:} Facilitar al usuario al lectura de la salida.
		\item \textbf{Resumen:} Tras realizar el algoritmo genético se obtiene una salida en formato JSON, que el usuario podrá ver a través de la web mediante su correspondiente maquetado.
	\end{itemize}				
	
	
\end{itemize} %fin lista CU

\newpage %\bigskip
\subsection{Diagramas de caso de uso}

\bigskip
\textbf{Gestión del Servicio web}

\bigskip
En esta sección se verán las tareas que influyen en el servicio web. Este sistema hará posible que el usuario pueda realizar una petición de algoritmo genético con los parámetros que quiera. Para poder hacer la \textit{petición al sistema} se tendrá que realizar una \textit{entrada de parámetros} correcta, pudiendo, después de ejecutarla, \textit{consultar la petición}.


\bigskip
\begin{figure}[h]
	\centering
	\includegraphics[width=0.7\linewidth]{../images/d_CU1}
	\caption[Diagrama de caso de uso en Gestión del Servicio web]{Diagrama de caso de uso en Gestión del Servicio web}
	\label{fig:d_CU1}
\end{figure}



\newpage %\bigskip
\textbf{Gestión del algoritmo genético}

\bigskip
En esta sección se verán las tareas que influyen en el algoritmo genético. El servidor hará uso del algoritmo genético implementado para aprovechar la GPU, con los parámetros que se le pasen (aunque si no se le pasan tendrá unos por defecto que se especifican) y generará una salida en formato JSON para poder trabajar con ella fácilmente. Para ello tendrá que haber ejecutado el algoritmo, y este a su vez realizar las distintas funcionalidades en un orden específico.

\bigskip
\begin{figure}[h]
	\centering
	\includegraphics[width=0.7\linewidth]{../images/d_CU2}
	\caption[Diagrama de caso de uso en Gestión del algoritmo]{Diagrama de caso de uso en Gestión del algoritmo}
	\label{fig:d_CU2}
\end{figure}


\newpage
\subsection{Diagrama de comunicación}
\bigskip
A continuación se muestra la comunicación entre las distintas partes simulando una \textit{Petición de servicio}:


\bigskip
\begin{figure}[h]
	\centering
	\includegraphics[width=1\linewidth]{../images/d_comunicacion}
	\caption[Diagrama con la comunicación entre las distintas partes]{Diagrama con la comunicación entre las distintas partes}
	\label{fig:d_comunicacion}
\end{figure}



\newpage %\bigskip  
\section{Flujo de la interfaz}
\bigskip

En esta sección se verá la navegación que se puede hacer a través de la web. Será una única pantalla, pero las distintas opciones se mostrarán en varias \textit{escenas} o \textit{pantallas}, para hacer un avance fluido y sin necesidad de retroceder o avanzar perdiendo información entre distintas pantallas.

\bigskip
\begin{figure}[h]
	\centering
	\includegraphics[width=1\linewidth]{../images/flujo_interfaz}
	\caption[Flujo de la interfaz web]{Flujo de la interfaz web}
	\label{fig:flujo_interfaz}
\end{figure}

